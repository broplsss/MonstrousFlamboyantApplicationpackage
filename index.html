<!DOCTYPE html>
<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Tangle Master 3D</title>
		<meta name="description" content="Tangle Master 3D is like a color puzzle, you need to sort and match colors of ropes and pins. If you get stuck, we have plenty of boosters to help you along the way :)">
    <link rel="shortcut icon" href="favicon.ico">
		<meta property="og:image" content="tangle-master-3d.png" />
<style>
        * {
            margin: 0;
            padding: 0;
        }
        body {
            background: #000416;
        }
		#container{
			top:50%;
			left:50%;
			position:absolute;
			transform: translate(-50%, -50%);
			/* background:#222c36; */
			background:#000416;
			overflow:hidden;
		}
		#logo{
			position: absolute;
			display:block;
			top: 50%;
			left: 50%;
			width:80%;
			-webkit-transform: translate(-50%,-50%);
			transform: translate(-50%,-50%);
			text-align: center;
			overflow:hidden;
		}
		div.button{
			background: #222c36;
			padding: 0 8px;
			text-align: center;
			border-radius: 3px;
			color: white;
			font-weight: bold;
			text-decoration: none;
			cursor:pointer;
		}
		div.moregames {
			height: 38px;
			line-height: 38px;
			padding: 0 5px;
			margin: 1px 1px 0 0;
			float: left;
			color: #333;
			text-align: left;
			font-size: 15px;
			position: relative;
			z-index: 10;
		}
		div.fullscreen{
			margin: 1px 1px 0 0;
			position:absolute;
			right:5px;
			height:38px;
			line-height:38px;
			display:inline-flex;
			font-weight:bold;
		}
		div.fullscreen img{
			padding-left:5px;
		}
    </style>
    <script src="build/UnityLoader.js"></script>
    <script type="text/javascript">

       function UnityProgress(gameInstance, progress) {
			var ua = window.navigator.userAgent;
			var iOS = !!ua.match(/iPad/i) || !!ua.match(/iPhone/i);
			var webkit = !!ua.match(/WebKit/i);
			var iOSSafari = iOS && webkit && !ua.match(/CriOS/i);

		  if (!gameInstance.Module) {
			 return;
		  } else if (progress === "complete") {
			 document.getElementById("logo").style.display = "none";
			// document.getElementById("FullscreenImg").style.display = "none";
			  //document.getElementById("sitelogo").style.display = "block";
			return;
		  } else if (progress == 1) {
			document.getElementById("loadinginfo").innerHTML = "PROCESSING...";
		  }
			else if (progress >= 0.9) {
			document.getElementById("loadinginfo").innerHTML = "Loading: 99%";
			 //document.getElementById("sitelogo").style.display = "none";
		  }
		  else if (progress > 0) {
			document.getElementById("loadinginfo").innerHTML = "Loading: " + Math.round(progress * 100) + "%";
			 //document.getElementById("sitelogo").style.display = "none";
		  }

			gameInstance.container.onmouseup = function()
			{
				if(!iOSSafari)
					openLink();
			}

    }
	function openLink(){
if (btnIdLogo>0 && isLogoClicked==true ) {
  switch (btnIdLogo)
    {
        case 1:
            CreateLinksInGame('Tiles-Hop','MenuScene','logo');
            break;
        case 2:
            CreateLinksInGame('Tiles-Hop','GameScene','logo');
            break;
        case 3:
            CreateLinksInGame('Tiles-Hop','GameoverScene','logo');
            break;
        case 4:
            CreateLinksInGame('Tiles-Hop','BallScene','logo');
            break;
    }
    btnIdLogo=-1;
    isLogoClicked=false;

}

 else if (btnIdMore>0 && isMoreClicked==true ) {

   switch (btnIdMore)
     {
         case 1:
             CreateLinksInGame('Tiles-Hop','MenuScene','logo');
             break;
         case 2:
             CreateLinksInGame('Tiles-Hop','GameScene','logo');
             break;
         case 3:
             CreateLinksInGame('Tiles-Hop','GameoverScene','logo');
             break;
         case 4:
             CreateLinksInGame('Tiles-Hop','BallScene','logo');
             break;
     }
     btnIdMore=-1;
     isMoreClicked=false;
 }
}
function CreateLinksInGame(NameID,Screen,Button,GameId){
	GameId = typeof GameId !== 'undefined' ? GameId : "";
	var domain=document.referrer;
	var url="https://www.yiv.com/";
	if(typeof GameId  === 'undefined' || GameId == "" || GameId == "undefined"){

    }else{
		//url = url+"&pic="+GameId;
		url = url+"?pic="+GameId;
	}
    if(typeof domain  === 'undefined' || domain == "" || domain == "undefined"){
    	domain="unknown";
    }else{
    	domain=domain.split('/')[2];
    }
	if(url.indexOf("?") > -1){
		url=url+"&";
	}else{
		url=url+"?";
	}
	url=url+"utm_source="+domain+"&utm_medium="+Screen+"-"+Button+"&utm_campaign=game-"+NameID;
	window.open(url);
}
    var gameInstance = UnityLoader.instantiate("gameContainer", "build/tangle-master-3d.json", {
      onProgress: UnityProgress,
      Module: {
        onRuntimeInitialized: function() { UnityProgress(gameInstance, "complete") }
      }
    });
    var btnIdLogo=-1;
    var isLogoClicked=false;
    var btnIdMore=-1;
    var isMoreClicked=false;


      function FitScreen(){
       var w=440;
       var h=750;
       var availWidth=window.innerWidth;
       var availHeight=window.innerHeight;

       var canvas = document.getElementById("#canvas");
       if(availWidth/availHeight>w/h){
         height = availHeight;
         width = (height*w/h);
      }else{
         width = availWidth;
         height = width*h/w;
      }

       document.getElementById("container").style.width=width + "px";
       document.getElementById("container").style.height=(height) + "px";
       document.getElementById("gameContainer").style.width=width + "px";
       document.getElementById("gameContainer").style.height=height + "px";

	  document.getElementById("logo").style.width=width*0.8 + "px";
	   document.getElementById("loadinginfo").style.fontSize=width*0.04 + "px";
	   canvas.style.width  = "100%";
      	canvas.style.height = "100%";
    if(window.WEBAudioMute){
        window.WEBAudioMute(false);
      }
   }
   function mute()
   {
    if(window.WEBAudioMute){
        window.WEBAudioMute(true);
      }
   }
      </script>
    <script src="js/functions.js?012345"></script>
    <script src="js/ShowGames.js?012345"></script>

	<script>
		// gamesBest = Games;
		// linkBest = CreateLinksInGame;
		// gamesCar = Games;
		// linkCar = CreateLinksInGame;
	</script>
	<script type="text/javascript">
	function openWindow(Screen,Button,NameId,website)
    {
       document.onmouseup = function()
        {
		    switch(website.trim().toLowerCase()){
				case "bestgames":
					GameId = GetGameIdByNameId(NameId,gamesBest);
					linkBest("Tangle Master 3D",Screen,Button,GameId);
					break;
				case "cargames":
					GameId = GetGameIdByNameId(NameId,gamesCar);
					linkCar("Tangle Master 3D",Screen,Button,GameId);
					break;
				default:
					console.log(website+" is error");
			}
			document.onmouseup = null;
        }
	}
	//随机一个nameId
	function GetNameIdByRandom(len,website){
		var gamesArr;
		switch(website.trim().toLowerCase()){
			case "bestgames":
				 gamesArr = gamesBest;
				break;
			case "cargames":
				 gamesArr = gamesCar;
				break;
			default:
				console.log(website+" is error");
			}
		var nameIdArray = new Array();
		var separator = ',';
		for(var i = 0;i<len;i++){
			var randomIndex;
			var nameId;
			do{
				 randomIndex = Math.floor(Math.random()*(gamesArr.length));
				 nameId = gamesArr[randomIndex]['nameid'];
			}while(nameIdArray.includes(nameId)&&len<=gamesArr.length);
			nameIdArray[i] = nameId;
		}
		nameIdArray[len] = website;
		var nameIds = nameIdArray.join(separator);
		console.log(nameIds);
	    gameInstance.SendMessage("WWWLoader","CallGetNameIds",nameIds);
	}
	//通过NameId获取GameId
	function GetGameIdByNameId(NameId,Games){
		for (i=0;i<Games.length;i++){
			if(Games[i]['nameid'] == NameId){
				return Games[i]['id'];
			}
		}
		console.log("ShowGames.js not exist ",NameId," correspond to vaule");
		return "";
	}
	//直接根据网址打开网页
	function openWindowByUrl(Url)
    {
	 var url = encodeURI(Url);
       document.onmouseup = function()
        {
            window.open(url);
			document.onmouseup = null;
        }
	}
	  </script>
	<script src="//www.games235.com/backlinks/v1.0.0/puzzle-tangle-3d"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1L2DV7E56"></script>
	<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'G-M1L2DV7E56');
	</script>

</head>
<body onFocus="FitScreen();" onLoad="FitScreen();" onResize="FitScreen();" onblur="mute();">
    <div id="container">
		<div id="gameContainer" style="width: 440px; height: 750px"></div>

            <div id="logo">
                <img src="thumb/tangle-master-3d.jpg" width="100%" height="100%">
                <img src="bestgames-logo.png" style="bottom:-2px;position:absolute;left:50%;width:80%;transform: translate(-50%, 0%); cursor:pointer;" onClick='linkBest("Tangle Master 3D","loading","logo")'>
                <div id="loadinginfo" style="position:absolute;bottom:0px;left:50%;width:50%;transform: translate(-50%, 0%);color:#a59d96;font-size:14px;">
                    Loading...
                </div>
            </div>
        </div>

<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v2cb3a2ab87c5498db5ce7e6608cf55231689030342039" integrity="sha512-DI3rPuZDcpH/mSGyN22erN5QFnhl760f50/te7FTIYxodEF8jJnSFnfnmG/c+osmIQemvUrnBtxnMpNdzvx1/g==" data-cf-beacon='{"rayId":"7e6acb91da60c5bc","version":"2023.4.0","r":1,"b":1,"token":"01f362c96c87425b85fd71fb46b49c8d","si":100}' crossorigin="anonymous"></script>
</body>
</html>
